/*
 jQuery Plugin: Highlight Search Terms - version 0.4

 LICENSE: http://hail2u.mit-license.org/2009
*/
(function(b){function g(a,c){var d="";b.each(c.referrerPatterns,function(){var b;if(RegExp(this,"i").exec(a))return b=RegExp(c.unsafeChars,"g"),d=decodeURIComponent(RegExp.$1).replace(b,"+").replace(/^\+*(.*?)\+*$/,"$1").replace(/\++/g,"|"),!1});return d}function e(a){return b("<u/>").text(a).html()}b.fn.highlightSearchTerms=function(a){var a=b.extend({},b.fn.highlightSearchTerms.defaults,a),c,d,f;b.merge(a.referrerPatterns,b.fn.highlightSearchTerms.builtinReferrerPatterns);if(c=a.referrer||document.referrer)d=
g(c,a),""!==d&&(d=RegExp("("+d+")","gi"),c=e(a.tagName),a=e(a.className),f="<"+c+' class="'+a+'">$1</'+c+">",this.find(":not(iframe, option, script, textarea)").contents().each(function(){if(3===this.nodeType){var a=e(this.nodeValue).replace(d,f);b(this).replaceWith(a)}}));return this};b.fn.highlightSearchTerms.defaults={tagName:"em",className:"highlight",referrerPatterns:[],unsafeChars:"[!-*,-/:-@[-`{-~]"};b.fn.highlightSearchTerms.builtinReferrerPatterns=["^http://www\\.google\\.com.+[&?]q=([^&]+).*$",
"^http://www\\.google\\.co\\.jp.+[&?]q=([^&]+).*$","^http://search\\.yahoo\\.com.+[&?]p=([^&]+).*$","^http://search\\.yahoo\\.co\\.jp.+[&?]p=([^&]+).*$","^http://www\\.bing\\.com.+[&?]q=([^&]+).*$"]})(jQuery);